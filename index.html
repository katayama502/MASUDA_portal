<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>益田市習い事ポータル | MASUDA Learning Hub</title>
  <meta name="description" content="益田市の学校別・大人向け習い事情報をまとめたポータルサイト。文化・スポーツ・アートまで幅広くご紹介。">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/styles.css">
</head>
<body>
  <header class="site-header">
    <div class="container header-content">
      <div class="logo">
        <span class="logo-mark">MASUDA</span>
        <span class="logo-text">Learning Hub</span>
      </div>
      <nav class="main-nav" aria-label="主要ナビゲーション">
        <ul>
          <li><a href="#schools">学校別</a></li>
          <li><a href="#adults">大人向け</a></li>
        </ul>
      </nav>
      <a class="cta-button" href="#schools">習い事を探す</a>
    </div>
  </header>

  <main>
    <section class="hero" role="banner">
      <div class="container hero-content">
        <div class="hero-copy">
          <p class="hero-tag">学校帰りに通える習い事がすぐ見つかる</p>
          <h1>益田市内の学校周辺で通える習い事</h1>
          <p>
            小学生・中学生・高校生が通いやすいよう、各学校の周辺で開催されている習い事をまとめました。<br>
            対象学年や開催エリア、通っている学校のタグから希望の習い事を探してください。
          </p>
          <div class="hero-actions">
            <a class="primary" href="#schools">習い事を検索する</a>
            <a class="secondary" href="#adults">大人向け習い事を見る</a>
          </div>
        </div>
      </div>
      <div class="hero-gradient" aria-hidden="true"></div>
    </section>

    <section id="schools" class="section schools">
      <div class="container">
        <div class="section-heading">
          <h2>学校周辺の習い事一覧</h2>
          <p>島根県益田市にある学校の通学圏を中心に、放課後や週末に通える習い事をまとめました。対象学年や学校名タグで絞り込みができます。</p>
        </div>
        <div class="school-search" aria-label="益田市内の習い事検索">
          <div class="filters" role="region" aria-label="検索条件">
            <div class="search-box">
              <label for="school-search-input">習い事名・キーワード検索</label>
              <input id="school-search-input" type="search" placeholder="例: サッカー / 英語 / 益田中学校" autocomplete="off">
              <p class="help-text">習い事名・開催場所・対象学校タグで横断検索できます。</p>
            </div>
            <fieldset class="type-filter">
              <legend>対象学年で絞り込む</legend>
              <label>
                <input type="checkbox" name="school-type" value="elementary" checked>
                <span>小学生向け</span>
              </label>
              <label>
                <input type="checkbox" name="school-type" value="middle" checked>
                <span>中学生向け</span>
              </label>
              <label>
                <input type="checkbox" name="school-type" value="high" checked>
                <span>高校生向け</span>
              </label>
            </fieldset>
            <div class="tag-filter" role="region" aria-label="タグで絞り込む">
              <div class="tag-filter-heading">
                <span>タグ</span>
                <button type="button" class="clear-tags" id="clear-tag-filter" hidden>選択中のタグをクリア</button>
              </div>
              <div class="tag-list" id="tag-list" role="listbox" aria-multiselectable="true"></div>
              <p class="help-text">タグはすべて学校名です。複数選択すると、選んだ学校のどれかに対応する習い事を表示します。</p>
            </div>
          </div>
          <div class="results" role="region" aria-live="polite" aria-busy="false">
            <div class="result-summary" id="result-summary"></div>
            <div class="school-list" id="school-list" role="list"></div>
          </div>
        </div>
      </div>
    </section>

    <section id="adults" class="section adults">
      <div class="container">
        <div class="section-heading">
          <h2>大人向け習い事</h2>
          <p>仕事帰りや週末に通える講座から、資格取得に役立つプログラムまで幅広く掲載。</p>
        </div>
        <div class="card-grid">
          <article class="card">
            <header>
              <p class="category">スポーツ・フィットネス</p>
              <h3>運動を楽しむ定期クラス</h3>
            </header>
            <ul class="resource-list">
              <li>
                <strong>市民スポーツ・文化教室（益田運動公園）</strong>
                <p>ヨガ／ピラティス／エアロビ／健康体操／フラダンス／卓球・テニスなど。昼・夜の部があり、教室名や曜日、講師一覧を公開。</p>
                <span class="resource-source">最新情報は益田運動公園の公式ページと広報資料から確認できます。</span>
              </li>
              <li>
                <strong>カーブス 益田乙吉</strong>
                <p>女性向け30分フィットネス。予約不要のサーキットトレーニングでスキマ時間に通えます。</p>
                <span class="resource-source">詳細はCurves公式サイト（curves.co.jp）で検索。</span>
              </li>
              <li>
                <strong>ボルダリング（アンダーフォレスト益田）</strong>
                <p>体験利用ができ、予約不要で立ち寄れるジム。Instagram投稿で最新の営業情報を発信中。</p>
                <span class="resource-source">最新投稿はアンダーフォレスト益田のInstagramで確認。</span>
              </li>
            </ul>
          </article>
          <article class="card">
            <header>
              <p class="category">文化・教養・手しごと</p>
              <h3>じっくり学ぶクラフト＆リベラルアーツ</h3>
            </header>
            <ul class="resource-list">
              <li>
                <strong>市民スポーツ・文化教室（文化の部）</strong>
                <p>手芸・実用書道・切り絵・ペン画など、趣味や暮らしに活かせる講座が揃っています。</p>
                <span class="resource-source">申込要項は益田運動公園サイトで公開。</span>
              </li>
              <li>
                <strong>公民館講座（各地区）</strong>
                <p>健康・教養講座や季節の体験企画を随時募集。吉田公民館だよりなど、各地区の広報をチェック。</p>
                <span class="resource-source">募集情報は益田市公式サイトで随時更新。</span>
              </li>
              <li>
                <strong>島根県芸術文化センター「グラントワ」ワークショップ</strong>
                <p>大人向け表現ワークショップなど、芸術体験イベントを不定期で開催。</p>
                <span class="resource-source">最新の開催情報はshimaneiro.jpで確認。</span>
              </li>
            </ul>
          </article>
          <article class="card">
            <header>
              <p class="category">ヨガ・ボディワーク</p>
              <h3>心身を整えるプログラム</h3>
            </header>
            <ul class="resource-list">
              <li>
                <strong>益田運動公園のヨガクラス</strong>
                <p>初級・中級・リラックスなど複数クラスを曜日固定で開講。通いたいレベルに合わせて選べます。</p>
                <span class="resource-source">教室スケジュールは益田運動公園サイトに掲載。</span>
              </li>
              <li>
                <strong>ハタヨガ（studio LEAP）</strong>
                <p>火曜夜ほかに開催。ドロップイン参加ができ、仕事帰りにも通いやすいクラス構成です。</p>
                <span class="resource-source">予約はfreee予約ページから。</span>
              </li>
              <li>
                <strong>レンタルスタジオ「studio LEAP」</strong>
                <p>ヨガやダンスなどのレッスン会場として利用できる鏡張りスペース。自主開催も相談可能。</p>
                <span class="resource-source">施設案内はmasudashi.com内の紹介ページを参照。</span>
              </li>
            </ul>
          </article>
          <article class="card">
            <header>
              <p class="category">料理・食</p>
              <h3>旬を味わうクッキング講座</h3>
            </header>
            <ul class="resource-list">
              <li>
                <strong>市内で開かれる料理教室</strong>
                <p>studio LEAPでの季節料理クラスや住宅メーカー会場でのイベントなど、地域主催のレッスンを随時開催。</p>
                <span class="resource-source">最新募集は主催者のInstagram投稿などで告知。</span>
              </li>
            </ul>
          </article>
          <article class="card">
            <header>
              <p class="category">語学</p>
              <h3>言葉を学ぶコミュニティ</h3>
            </header>
            <ul class="resource-list">
              <li>
                <strong>日本語ボランティア「ともがき」</strong>
                <p>益田市人権センターで日曜午前に実施。テキスト代実費で外国人住民の日本語学習をサポート。</p>
                <span class="resource-source">案内は益田市人権センター（sic-info.org）に掲載。</span>
              </li>
              <li>
                <strong>オンライン語学レッスンの県内対応</strong>
                <p>HH JapaNeedsなど、オンラインで益田市に対応する英会話・日本語レッスンも利用可能。</p>
                <span class="resource-source">対応エリアは各サービスの公式サイトで確認。</span>
              </li>
            </ul>
          </article>
          <article class="card">
            <header>
              <p class="category">音楽・ダンス</p>
              <h3>リズムと表現の学び</h3>
            </header>
            <ul class="resource-list">
              <li>
                <strong>益田運動公園のカルチャークラス</strong>
                <p>フラダンスなど、音楽と身体表現を楽しむ講座を展開。</p>
                <span class="resource-source">詳細は益田運動公園の教室案内で確認。</span>
              </li>
              <li>
                <strong>studio LEAPのダンス利用</strong>
                <p>鏡張りのスタジオスペースをダンス練習やワークショップ会場として利用可能。</p>
                <span class="resource-source">スタジオの予約・空き状況は公式サイトで確認。</span>
              </li>
            </ul>
          </article>
          <article class="card">
            <header>
              <p class="category">使い方のコツ</p>
              <h3>最新情報を逃さないために</h3>
            </header>
            <ul class="resource-list">
              <li>
                <strong>市民スポーツ・文化教室の募集時期</strong>
                <p>募集は期ごとに行われ、広報ますだや運動公園サイトに最新PDFが掲載されます。</p>
                <span class="resource-source">次期募集や空き状況は益田市公式サイトでチェック。</span>
              </li>
              <li>
                <strong>会場型イベントの最新予定</strong>
                <p>studio LEAPなど会場提供型のレッスンは主催者によって内容が変わるため、Instagramや予約ページで最新情報を確認しましょう。</p>
                <span class="resource-source">freee予約ページや各主催者のSNSで更新。</span>
              </li>
            </ul>
          </article>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container footer-grid">
      <div>
        <div class="logo">
          <span class="logo-mark">MASUDA</span>
          <span class="logo-text">Learning Hub</span>
        </div>
        <p class="footer-copy">地域と学びをつなぐ益田市の情報プラットフォーム。</p>
      </div>
      <div>
        <h4>メニュー</h4>
        <ul>
          <li><a href="#schools">学校別</a></li>
          <li><a href="#adults">大人向け</a></li>
        </ul>
      </div>
      <div>
        <h4>SNS</h4>
        <ul class="sns">
          <li><a href="https://www.instagram.com/" target="_blank" rel="noopener">Instagram</a></li>
          <li><a href="https://www.facebook.com/" target="_blank" rel="noopener">Facebook</a></li>
          <li><a href="https://line.me/" target="_blank" rel="noopener">LINE公式</a></li>
        </ul>
      </div>
    </div>
    <p class="copyright">&copy; 2024 MASUDA Learning Hub</p>
  </footer>
  <script>
    const TYPE_LABELS = {
      elementary: '小学生向け',
      middle: '中学生向け',
      high: '高校生向け'
    };

    const TYPE_ORDER = {
      elementary: 0,
      middle: 1,
      high: 2
    };

    const SCHOOLS = [
      {
        name: '明光義塾 益田駅前教室',
        types: ['elementary', 'middle', 'high'],
        district: '駅前町（益田駅前ビル内）',
        address: '益田市駅前町 17-1 益田駅前ビル2F',
        managingBody: '明光義塾',
        notes: '個別指導専門の学習塾。学校別カリキュラムと定期テスト・受験対策に対応。',
        category: '学習塾・予備校',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田高等学校']
      },
      {
        name: '渡辺塾',
        types: ['elementary', 'middle', 'high'],
        district: '益田市中心部',
        address: '益田市昭和町 本部教室ほか',
        managingBody: '渡辺塾',
        notes: '全教科対応の通い放題プランで自分のペースに合わせて学べる地域密着塾。',
        category: '学習塾・予備校',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田高等学校']
      },
      {
        name: '塾ナビ（益田市高校生向け塾一覧）',
        types: ['high'],
        district: 'オンライン特集',
        address: 'Web特集ページ',
        managingBody: '塾ナビ',
        notes: '益田市で高校生が通える学習塾・予備校を比較できるポータルサイト。',
        category: '学習塾・予備校',
        tags: ['島根県立益田高等学校', '島根県立益田翔陽高等学校', '益田東高等学校']
      },
      {
        name: 'Puffin English School',
        types: ['elementary', 'middle', 'high'],
        district: '乙吉町',
        address: '益田市乙吉町 専用スタジオ',
        managingBody: 'Puffin English School',
        notes: '2才から大人まで対応する会話重視の少人数制英会話教室。',
        category: '英語・英会話',
        tags: ['益田市立吉田小学校', '益田市立東陽中学校', '益田東高等学校']
      },
      {
        name: 'ペッピーキッズクラブ 益田教室',
        types: ['elementary', 'middle'],
        district: '乙吉町',
        address: '益田市乙吉町 子ども英会話スタジオ',
        managingBody: 'イッティージャパン株式会社',
        notes: 'リズムとフォニックスを取り入れたこども英会話。幼児から中学生まで対応。',
        category: '英語・英会話',
        tags: ['益田市立吉田小学校', '益田市立東陽中学校']
      },
      {
        name: 'ECCジュニア 久城教室',
        types: ['elementary', 'middle', 'high'],
        district: '久城町',
        address: '益田市久城町 個人宅教室',
        managingBody: 'ECCジュニア',
        notes: '英検・漢検対策コースもある地域密着型の英語教室。',
        category: '英語・英会話',
        tags: ['益田市立久城小学校', '益田市立東陽中学校', '益田東高等学校']
      },
      {
        name: 'ECCジュニア（益田市内教室一覧）',
        types: ['elementary', 'middle', 'high'],
        district: 'オンライン特集',
        address: '公式サイト 教室検索',
        managingBody: 'ECCジュニア',
        notes: '益田市内のECCジュニア各教室をまとめて検索できる公式ページ。',
        category: '英語・英会話',
        tags: ['益田市立吉田小学校', '益田市立益田中学校', '島根県立益田翔陽高等学校']
      },
      {
        name: 'こどもプログラミング教室 クリエット',
        types: ['elementary', 'middle'],
        district: '益田市内',
        address: '益田市内 会場は申込時に案内',
        managingBody: 'クリエット',
        notes: 'Scratchや電子工作で創造力を育む小中学生向けプログラミング教室。',
        category: 'プログラミング／ロボット',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田高等学校']
      },
      {
        name: 'ヒューマンアカデミー こどもプログラミング 益田駅前教室',
        types: ['elementary', 'middle'],
        district: '駅前町（Eagaビル2F）',
        address: '益田市駅前町 35-2 Eagaビル2F',
        managingBody: 'ヒューマンアカデミー',
        notes: 'Scratch・マインクラフト・Pythonなど段階的に学べるカリキュラム。',
        category: 'プログラミング／ロボット',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田高等学校']
      },
      {
        name: 'タミヤロボットスクール ツクロ益田教室',
        types: ['elementary', 'middle'],
        district: '常盤町',
        address: '益田市常盤町 体験スペース',
        managingBody: 'ツクロ益田',
        notes: 'タミヤのロボット教材で組み立てとプログラミングを学ぶ少人数クラス。',
        category: 'プログラミング／ロボット',
        tags: ['益田市立吉田小学校', '益田市立益田中学校', '島根県立益田翔陽高等学校']
      },
      {
        name: 'コエテコ（益田市プログラミング教室一覧）',
        types: ['elementary', 'middle'],
        district: 'オンライン特集',
        address: 'Web特集ページ',
        managingBody: 'コエテコ by GMO',
        notes: '益田市の子ども向けプログラミング・ロボット教室を比較できる情報サイト。',
        category: 'プログラミング／ロボット',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田翔陽高等学校']
      },
      {
        name: 'Enjoy Music Association',
        types: ['elementary', 'middle', 'high'],
        district: '市内複数拠点',
        address: '益田市内 各スタジオ（申込時案内）',
        managingBody: 'Enjoy Music Association',
        notes: 'ヤマハ有資格講師が在籍。ボーカル・ピアノなど幅広いコースを用意。',
        category: '音楽',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田高等学校']
      },
      {
        name: 'オリエント音楽教室センター 常盤教室',
        types: ['elementary', 'middle', 'high'],
        district: '常盤町',
        address: '益田市常盤町 ピアノ教室',
        managingBody: 'オリエント音楽教室センター',
        notes: '個別レッスンで基礎からコンクール対策まで対応するピアノ専門教室。',
        category: '音楽',
        tags: ['益田市立吉田小学校', '益田市立益田中学校', '島根県立益田翔陽高等学校']
      },
      {
        name: 'ヤマハ音楽教室（益田・島根県内一覧）',
        types: ['elementary', 'middle', 'high'],
        district: 'オンライン特集',
        address: '公式サイト 教室検索',
        managingBody: 'ヤマハ音楽教室',
        notes: '益田市や島根県内のヤマハ音楽教室を横断的に調べられる公式ページ。',
        category: '音楽',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田翔陽高等学校']
      },
      {
        name: '太陽フィットネスクラブ 石見店 スイミングスクール',
        types: ['elementary', 'middle', 'high'],
        district: '駅前町',
        address: '益田市駅前町 25m×6コースの屋内プール',
        managingBody: '太陽フィットネスクラブ',
        notes: 'ベビーから選手育成まで対応。駅前で通いやすいスイミングスクール。',
        category: 'スポーツ / スイミング',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田高等学校']
      },
      {
        name: '益田スイミングクラブ',
        types: ['elementary', 'middle', 'high'],
        district: '益田市内',
        address: '益田市内 専用プール',
        managingBody: '益田スイミングクラブ',
        notes: '地域密着で技術と体力を育むスイミングクラブ。体験参加も受付。',
        category: 'スポーツ / スイミング',
        tags: ['益田市立高津小学校', '益田市立高津中学校', '島根県立益田翔陽高等学校']
      },
      {
        name: 'PSV益田',
        types: ['elementary', 'middle'],
        district: '益田市内各会場',
        address: '益田市内 グラウンド（U-8〜U-15対象）',
        managingBody: 'PSV益田サッカークラブ',
        notes: '育成課が学年別クラスを開講。月謝やスケジュールを公式サイトで公開。',
        category: 'スポーツ / サッカー',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田翔陽高等学校']
      },
      {
        name: '島根県立サッカー場 サッカー教室',
        types: ['elementary', 'middle'],
        district: '乙吉町',
        address: '益田市乙吉町 島根県立サッカー場',
        managingBody: '島根県スポーツ振興財団',
        notes: '小・中学生対象の期別教室。プロコーチが基礎技術を指導。',
        category: 'スポーツ / サッカー',
        tags: ['益田市立吉田小学校', '益田市立東陽中学校', '益田東高等学校']
      },
      {
        name: 'p-ground（益田市サッカーチーム検索）',
        types: ['elementary', 'middle', 'high'],
        district: 'オンライン特集',
        address: 'Web検索サービス',
        managingBody: 'p-ground',
        notes: '益田市のサッカーチームやスクールを検索できる情報データベース。',
        category: 'スポーツ / サッカー',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田翔陽高等学校']
      },
      {
        name: '日本空手道糸洲会 拳志舘益田支部',
        types: ['elementary', 'middle'],
        district: '昭和町（市民体育館）',
        address: '益田市昭和町 市民体育館 剣道場',
        managingBody: '日本空手道糸洲会 拳志舘益田支部',
        notes: '小6〜中3を中心に指導。月謝無料で実費のみの空手教室。',
        category: 'スポーツ / 武道',
        tags: ['益田市立益田小学校', '益田市立益田中学校']
      },
      {
        name: '高津武道館',
        types: ['elementary', 'middle', 'high'],
        district: '高津町',
        address: '益田市高津町 高津武道館',
        managingBody: '高津武道館',
        notes: '剣道を中心に地域の武道活動を紹介。稽古情報を随時発信。',
        category: 'スポーツ / 武道',
        tags: ['益田市立高津小学校', '益田市立高津中学校', '島根県立益田翔陽高等学校']
      },
      {
        name: 'Sunbeams キッズダンスチーム',
        types: ['elementary', 'middle'],
        district: '益田市内',
        address: '益田市内 練習スタジオ',
        managingBody: 'Sunbeams',
        notes: '幼児から参加できるキッズダンスチーム。地域イベントへの出演も多数。',
        category: 'ダンス',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田高等学校']
      },
      {
        name: 'MYSブライトネス ダンススタジオ',
        types: ['elementary', 'middle', 'high'],
        district: '益田・浜田エリア',
        address: '益田市内 提携スタジオ（詳細は公式SNS）',
        managingBody: 'MYSブライトネス',
        notes: 'ジャズ・K-POPなど多彩なジャンルを学べるダンススタジオ。',
        category: 'ダンス',
        tags: ['益田市立高津小学校', '益田市立高津中学校', '島根県立益田翔陽高等学校']
      },
      {
        name: '習研 岡野書道教室',
        types: ['elementary', 'middle', 'high'],
        district: '駅前町',
        address: '益田市駅前町 書道教室',
        managingBody: '習研 岡野書道教室',
        notes: '月3回開催。体験レッスンも受付する少人数制の書道教室。',
        category: '書道・そろばん',
        tags: ['益田市立益田小学校', '益田市立益田中学校', '島根県立益田高等学校']
      },
      {
        name: '佐々木習字教室',
        types: ['elementary', 'middle', 'high'],
        district: '東町',
        address: '益田市東町 書道教室',
        managingBody: '佐々木習字教室',
        notes: '幼児から一般まで学べる書道教室。月謝2,500円で継続しやすい。',
        category: '書道・そろばん',
        tags: ['益田市立益田小学校', '益田市立益田中学校']
      },
      {
        name: '公文式（益田市内教室）',
        types: ['elementary', 'middle', 'high'],
        district: '乙吉・久城・高津ほか',
        address: '益田市内各教室（乙吉・久城・高津・本町・三宅町・横田）',
        managingBody: '公文教育研究会',
        notes: '算数・英語・国語の個別学習。学校帰りに通いやすい複数教室を展開。',
        category: '書道・そろばん',
        tags: ['益田市立益田小学校', '益田市立吉田小学校', '益田市立高津小学校', '益田市立益田中学校', '益田市立高津中学校', '島根県立益田高等学校']
      },
      {
        name: '福原そろばん教室 ほか市内そろばん教室',
        types: ['elementary', 'middle'],
        district: '染羽町 ほか',
        address: '益田市染羽町（福原そろばん）ほか 増野・西本・岩本教室あり',
        managingBody: '益田市そろばん教室ネットワーク',
        notes: '基礎から珠算・暗算を学べるそろばん教室。市内複数拠点を掲載。',
        category: '書道・そろばん',
        tags: ['益田市立益田小学校', '益田市立益田中学校']
      },
      {
        name: '学年別おすすめ：小学生',
        types: ['elementary'],
        district: 'ガイド記事',
        address: 'MASUDA Learning Hub 編集部',
        managingBody: 'MASUDA Learning Hub',
        notes: 'ECCジュニアやPeppy、クリエット、ヒューマンアカデミー、タミヤロボットスクール、EMA音楽、スイミング、PSV、書道、そろばん、公文などをチェック。',
        category: '学年別ガイド',
        tags: ['益田市立益田小学校', '益田市立吉田小学校', '益田市立高津小学校']
      },
      {
        name: '学年別おすすめ：中学生',
        types: ['middle'],
        district: 'ガイド記事',
        address: 'MASUDA Learning Hub 編集部',
        managingBody: 'MASUDA Learning Hub',
        notes: '明光義塾や渡辺塾、公文、英会話継続、PSV（U-15）、スイミング、書道などを比較。',
        category: '学年別ガイド',
        tags: ['益田市立益田中学校', '益田市立高津中学校', '益田市立東陽中学校']
      },
      {
        name: '学年別おすすめ：高校生',
        types: ['high'],
        district: 'ガイド記事',
        address: 'MASUDA Learning Hub 編集部',
        managingBody: 'MASUDA Learning Hub',
        notes: '明光義塾や渡辺塾、公文、映像授業系予備校、上級英会話、音楽専門レッスンなどを紹介。',
        category: '学年別ガイド',
        tags: ['島根県立益田高等学校', '島根県立益田翔陽高等学校', '益田東高等学校']
      }
    ];
    const CITY_SCHOOL_TAGS = [
      // 小学校
      '益田市立益田小学校',
      '益田市立吉田小学校',
      '益田市立高津小学校',
      '益田市立久城小学校',
      '益田市立横田小学校',
      '益田市立戸田小学校',
      '益田市立鎌手小学校',
      '益田市立東仙道小学校',
      '益田市立種小学校',
      '益田市立飯田小学校',
      '益田市立雪舟小学校',
      '益田市立匹見小学校',
      '益田市立美都小学校',
      '益田市立二条小学校',
      '益田市立都茂小学校',
      // 中学校
      '益田市立益田中学校',
      '益田市立高津中学校',
      '益田市立東陽中学校',
      '益田市立鎌手中学校',
      '益田市立匹見中学校',
      '益田市立美都中学校',
      '益田市立二条中学校',
      '益田市立横田中学校',
      '益田市立都茂中学校',
      '益田市立雪舟中学校',
      // 高等学校
      '島根県立益田高等学校',
      '島根県立益田翔陽高等学校',
      '益田東高等学校'
    ];
    function getSchoolTypes(school) {
      if (Array.isArray(school.types) && school.types.length > 0) {
        return school.types;
      }
      if (school.type) {
        return [school.type];
      }
      return [];
    }

    function getPrimaryTypeOrder(school) {
      const schoolTypes = getSchoolTypes(school);
      if (schoolTypes.length === 0) return 99;
      return Math.min(
        ...schoolTypes.map((type) => {
          const order = TYPE_ORDER[type];
          return typeof order === 'number' ? order : 99;
        })
      );
    }

    function deriveLogoToken(name) {
      if (!name) return '習';
      const trimmed = name.replace(/[（(].*?[)）]/g, '').trim();
      if (!trimmed) return '習';
      const asciiParts = trimmed.match(/[A-Za-z0-9]+/g);
      if (asciiParts && asciiParts.length > 0) {
        const first = asciiParts[0]?.[0] ?? '';
        const second = asciiParts.length > 1 ? asciiParts[1]?.[0] ?? '' : asciiParts[0]?.[1] ?? '';
        const token = `${first}${second}`.toUpperCase();
        if (token.trim()) {
          return token;
        }
      }
      const joined = trimmed.replace(/[\s・／/]/g, '');
      return joined.slice(0, 2) || trimmed[0];
    }

    function getLogoColors(seed) {
      const source = seed || 'masuda';
      let hash = 0;
      for (const char of source) {
        hash = (hash << 5) - hash + char.codePointAt(0);
        hash |= 0;
      }
      const hue = Math.abs(hash) % 360;
      return {
        bg: `hsl(${hue}, 82%, 92%)`,
        fg: `hsl(${hue}, 65%, 30%)`
      };
    }

    function createBookIcon(colors) {
      return `
        <svg viewBox="0 0 64 64" role="presentation" focusable="false" aria-hidden="true">
          <rect x="10" y="14" width="18" height="36" rx="4" fill="${colors.accent}" opacity="0.35"></rect>
          <rect x="36" y="14" width="18" height="36" rx="4" fill="${colors.accent}" opacity="0.55"></rect>
          <path d="M28 18h8" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round"></path>
          <path d="M28 26h8" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" opacity="0.8"></path>
          <path d="M28 34h8" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" opacity="0.65"></path>
          <path d="M20 14v34m24-34v34" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round"></path>
        </svg>
      `;
    }

    function createEnglishIcon(colors) {
      return `
        <svg viewBox="0 0 64 64" role="presentation" focusable="false" aria-hidden="true">
          <path d="M14 22a8 8 0 0 1 8-8h20a8 8 0 0 1 8 8v10a8 8 0 0 1-8 8H30l-10 8v-8h-2a8 8 0 0 1-8-8Z" fill="${colors.accent}" opacity="0.45"></path>
          <path d="M24 26h16" stroke="${colors.primary}" stroke-width="3.2" stroke-linecap="round"></path>
          <path d="M24 32h10" stroke="${colors.primary}" stroke-width="3.2" stroke-linecap="round" opacity="0.8"></path>
          <circle cx="44" cy="30" r="3.5" fill="${colors.primary}"></circle>
        </svg>
      `;
    }

    function createCodingIcon(colors) {
      return `
        <svg viewBox="0 0 64 64" role="presentation" focusable="false" aria-hidden="true">
          <rect x="10" y="16" width="44" height="32" rx="6" fill="${colors.accent}" opacity="0.35"></rect>
          <rect x="14" y="20" width="36" height="24" rx="4" fill="${colors.contrast}" opacity="0.65"></rect>
          <path d="M22 32 18 28m4 4-4 4" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"></path>
          <path d="M34 24h10" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" opacity="0.85"></path>
          <path d="M34 30h8" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" opacity="0.7"></path>
          <path d="M34 36h6" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" opacity="0.6"></path>
        </svg>
      `;
    }

    function createMusicIcon(colors) {
      return `
        <svg viewBox="0 0 64 64" role="presentation" focusable="false" aria-hidden="true">
          <path d="M40 16v24a8 8 0 1 1-5-7.53V20l-14 4v18a8 8 0 1 1-5-7.53V22.3a4 4 0 0 1 2.92-3.85l20.16-5.24A3 3 0 0 1 42 16Z" fill="${colors.primary}" opacity="0.75"></path>
          <circle cx="22" cy="44" r="6" fill="${colors.accent}" opacity="0.85"></circle>
          <circle cx="38" cy="40" r="6" fill="${colors.accent}" opacity="0.6"></circle>
        </svg>
      `;
    }

    function createSwimmingIcon(colors) {
      return `
        <svg viewBox="0 0 64 64" role="presentation" focusable="false" aria-hidden="true">
          <path d="M20 26c2.4-4.2 8-6.5 12.4-3.8l6.4 3.8c4.8 2.8 11.2 0.6 13.6-4.5" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"></path>
          <path d="M18 36c2.5 0 4.2-1.3 6.3-2.4s4.7-1.9 7.7-0.5 4.6 4.1 8 4.1 5.8-1.9 8.5-3.4" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none" opacity="0.9"></path>
          <path d="M14 44c2.7 0 4.6-1.3 7-2.5s5.3-2.4 8.6-1 5 3.8 8.4 3.8 6.2-2 9.4-3.5" stroke="${colors.accent}" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none" opacity="0.9"></path>
          <circle cx="40" cy="20" r="5" fill="${colors.accent}" opacity="0.6"></circle>
        </svg>
      `;
    }

    function createSoccerIcon(colors) {
      return `
        <svg viewBox="0 0 64 64" role="presentation" focusable="false" aria-hidden="true">
          <circle cx="32" cy="32" r="18" fill="${colors.accent}" opacity="0.4"></circle>
          <polygon points="32 20 25 24 27 32 32 35 37 32 39 24" fill="${colors.contrast}" opacity="0.9"></polygon>
          <path d="M32 20 25 24l2 8 5 3 5-3 2-8-7-4Z" stroke="${colors.primary}" stroke-width="2.5" stroke-linejoin="round" fill="none"></path>
          <path d="m25 24-6 5 4 7 6-4" stroke="${colors.primary}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"></path>
          <path d="m39 24 6 5-4 7-6-4" stroke="${colors.primary}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"></path>
          <path d="m27 32-2 8 7 4 7-4-2-8" stroke="${colors.primary}" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round" fill="none"></path>
        </svg>
      `;
    }

    function createMartialIcon(colors) {
      return `
        <svg viewBox="0 0 64 64" role="presentation" focusable="false" aria-hidden="true">
          <rect x="12" y="24" width="40" height="16" rx="6" fill="${colors.accent}" opacity="0.55"></rect>
          <path d="M18 32h28" stroke="${colors.primary}" stroke-width="5" stroke-linecap="round"></path>
          <path d="M26 32c0 6-2 12-6 14" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round"></path>
          <path d="M38 32c0 6 2 12 6 14" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round"></path>
          <circle cx="32" cy="32" r="6" fill="${colors.contrast}" opacity="0.85"></circle>
        </svg>
      `;
    }

    function createDanceIcon(colors) {
      return `
        <svg viewBox="0 0 64 64" role="presentation" focusable="false" aria-hidden="true">
          <path d="M26 46c2.2-6.5 8.8-11 12-16s2.6-10.7-1.3-14.6" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" fill="none"></path>
          <path d="M22 28c4.1 0 8.4 2.7 12 9 1.6 2.8 3.9 5.6 7 6.7" stroke="${colors.accent}" stroke-width="3" stroke-linecap="round" fill="none" opacity="0.85"></path>
          <circle cx="38" cy="16" r="5" fill="${colors.primary}" opacity="0.75"></circle>
          <circle cx="24" cy="46" r="6" fill="${colors.accent}" opacity="0.65"></circle>
          <path d="M30 22c-4.5 2.1-7.6 6.2-8 10.5" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" opacity="0.7"></path>
        </svg>
      `;
    }

    function createCalligraphyIcon(colors) {
      return `
        <svg viewBox="0 0 64 64" role="presentation" focusable="false" aria-hidden="true">
          <path d="M20 12c10 8 18 22 24 38" stroke="${colors.primary}" stroke-width="4" stroke-linecap="round" fill="none"></path>
          <path d="M38 18c-2 6-6 14-12 20" stroke="${colors.primary}" stroke-width="3" stroke-linecap="round" opacity="0.6" fill="none"></path>
          <path d="M24 48c4 0 8 2 12 4s8 2 12-2" stroke="${colors.accent}" stroke-width="4" stroke-linecap="round" fill="none" opacity="0.85"></path>
          <path d="M16 50c3-4 6-5 8-6" stroke="${colors.primary}" stroke-width="4" stroke-linecap="round"></path>
        </svg>
      `;
    }

    function createGuideIcon(colors) {
      return `
        <svg viewBox="0 0 64 64" role="presentation" focusable="false" aria-hidden="true">
          <circle cx="32" cy="32" r="18" fill="${colors.accent}" opacity="0.45"></circle>
          <polygon points="32 18 26 32 32 32 32 46 38 32 32 32" fill="${colors.contrast}" opacity="0.9"></polygon>
          <circle cx="32" cy="32" r="6" fill="${colors.primary}" opacity="0.8"></circle>
          <path d="M32 18v12l6-2-6-10Z" fill="${colors.primary}" opacity="0.75"></path>
        </svg>
      `;
    }

    const CATEGORY_ICON_DEFINITIONS = [
      {
        match: (category) => /学習塾|予備校/.test(category),
        background: 'linear-gradient(140deg, #edf1ff, #dfe7ff)',
        primary: '#2f4de4',
        accent: '#9aaefc',
        contrast: '#ffffff',
        render: createBookIcon
      },
      {
        match: (category) => /英語/.test(category),
        background: 'linear-gradient(140deg, #e2f2ff, #f5fbff)',
        primary: '#087ac4',
        accent: '#6fd3ff',
        contrast: '#ffffff',
        render: createEnglishIcon
      },
      {
        match: (category) => /プログラミング|ロボット/.test(category),
        background: 'linear-gradient(140deg, #e3f9f1, #f2fffb)',
        primary: '#00896f',
        accent: '#6fe5b7',
        contrast: '#103c2f',
        render: createCodingIcon
      },
      {
        match: (category) => /音楽/.test(category),
        background: 'linear-gradient(140deg, #f6e7ff, #fef3ff)',
        primary: '#8a3cff',
        accent: '#caa5ff',
        contrast: '#ffffff',
        render: createMusicIcon
      },
      {
        match: (category) => /スイミング/.test(category),
        background: 'linear-gradient(140deg, #e1f4ff, #eafcff)',
        primary: '#0075c9',
        accent: '#6ec8ff',
        contrast: '#ffffff',
        render: createSwimmingIcon
      },
      {
        match: (category) => /サッカー/.test(category),
        background: 'linear-gradient(140deg, #f1fff2, #e7fbe9)',
        primary: '#2f7d32',
        accent: '#9be79e',
        contrast: '#f5fff4',
        render: createSoccerIcon
      },
      {
        match: (category) => /武道/.test(category),
        background: 'linear-gradient(140deg, #fff2e1, #fff8ed)',
        primary: '#e07a12',
        accent: '#ffbb66',
        contrast: '#ffffff',
        render: createMartialIcon
      },
      {
        match: (category) => /ダンス/.test(category),
        background: 'linear-gradient(140deg, #ffe5f3, #fff2f8)',
        primary: '#ff4f8b',
        accent: '#ff9ec1',
        contrast: '#ffffff',
        render: createDanceIcon
      },
      {
        match: (category) => /書道|そろばん/.test(category),
        background: 'linear-gradient(140deg, #f4f4f4, #ffffff)',
        primary: '#343a40',
        accent: '#9fa2a6',
        contrast: '#ededed',
        render: createCalligraphyIcon
      },
      {
        match: (category) => /学年別/.test(category),
        background: 'linear-gradient(140deg, #e9f5ff, #f3f9ff)',
        primary: '#0e64b3',
        accent: '#8cc5ff',
        contrast: '#ffffff',
        render: createGuideIcon
      }
    ];

    function resolveIllustrationDesign(school) {
      const category = school.category ?? '';
      const definition = CATEGORY_ICON_DEFINITIONS.find((item) => item.match(category));
      if (!definition) return null;
      const palette = {
        primary: definition.primary,
        accent: definition.accent,
        contrast: definition.contrast ?? '#ffffff'
      };
      return {
        background: definition.background,
        foreground: definition.primary,
        svg: definition.render(palette)
      };
    }

    function createSchoolLogo(school) {
      const logo = document.createElement('div');
      logo.className = 'school-logo';
      const illustration = resolveIllustrationDesign(school);
      const token = school.logoText ?? deriveLogoToken(school.name ?? '');
      const colors = getLogoColors(school.logoSeed ?? `${school.name ?? ''}${school.category ?? ''}`);

      if (illustration?.svg) {
        logo.classList.add('is-illustrated');
        logo.style.setProperty('--logo-bg', illustration.background ?? colors.bg);
        logo.style.setProperty('--logo-fg', illustration.foreground ?? colors.fg);
        logo.innerHTML = illustration.svg;
      } else {
        const background = school.logoColor ?? colors.bg;
        const foreground = school.logoTextColor ?? colors.fg;
        logo.style.setProperty('--logo-bg', background);
        logo.style.setProperty('--logo-fg', foreground);

        const label = document.createElement('span');
        label.textContent = token;
        label.setAttribute('aria-hidden', 'true');
        logo.appendChild(label);
      }

      const ariaLabel = school.category
        ? `${school.name}（${school.category}）のイメージイラスト`
        : `${school.name}のイメージイラスト`;
      logo.setAttribute('role', 'img');
      logo.setAttribute('aria-label', ariaLabel);

      return logo;
    }

    const typeKeys = Object.keys(TYPE_ORDER);

    const state = {
      types: new Set(typeKeys),
      tags: new Set(),
      term: ''
    };

    const searchInput = document.getElementById('school-search-input');
    const typeCheckboxes = document.querySelectorAll('input[name="school-type"]');
    const tagList = document.getElementById('tag-list');
    const schoolList = document.getElementById('school-list');
    const resultSummary = document.getElementById('result-summary');
    const clearTagsButton = document.getElementById('clear-tag-filter');
    const resultsRegion = document.querySelector('.results');

    const derivedTags = SCHOOLS.flatMap((school) => school.tags ?? []);
    const allTags = Array.from(new Set([...CITY_SCHOOL_TAGS, ...derivedTags])).sort((a, b) =>
      a.localeCompare(b, 'ja')
    );

    const tagButtons = new Map();

    allTags.forEach((tag) => {
      const button = document.createElement('button');
      button.type = 'button';
      button.className = 'tag-chip';
      button.textContent = tag;
      button.setAttribute('role', 'option');
      button.setAttribute('aria-pressed', 'false');
      button.dataset.tag = tag;
      button.addEventListener('click', () => {
        const isSelected = state.tags.has(tag);
        if (isSelected) {
          state.tags.delete(tag);
        } else {
          state.tags.add(tag);
        }
        button.classList.toggle('active', !isSelected);
        button.setAttribute('aria-pressed', (!isSelected).toString());
        clearTagsButton.hidden = state.tags.size === 0;
        render();
      });
      tagButtons.set(tag, button);
      tagList.appendChild(button);
    });

    clearTagsButton.addEventListener('click', () => {
      state.tags.clear();
      tagButtons.forEach((button) => {
        button.classList.remove('active');
        button.setAttribute('aria-pressed', 'false');
      });
      clearTagsButton.hidden = true;
      render();
    });

    searchInput.addEventListener('input', (event) => {
      state.term = event.target.value.trim();
      render();
    });

    typeCheckboxes.forEach((checkbox) => {
      checkbox.addEventListener('change', () => {
        const { value, checked } = checkbox;
        if (checked) {
          state.types.add(value);
        } else {
          state.types.delete(value);
          if (state.types.size === 0) {
            state.types.add(value);
            checkbox.checked = true;
            return;
          }
        }
        render();
      });
    });

    function normalizeText(value) {
      return value.toString().toLowerCase().normalize('NFKC');
    }

    function filterSchools() {
      const normalizedTerm = normalizeText(state.term);
      return SCHOOLS.filter((school) => {
        const schoolTypes = getSchoolTypes(school);
        if (schoolTypes.length === 0) return true;
        return schoolTypes.some((type) => state.types.has(type));
      })
        .filter((school) => {
          if (!normalizedTerm) return true;
          const keywords = [
            school.name,
            school.district,
            school.address,
            school.managingBody,
            school.notes,
            school.category,
            ...(school.keywords ?? []),
            ...(school.tags ?? [])
          ].join(' ');
          return normalizeText(keywords).includes(normalizedTerm);
        })
        .filter((school) => {
          if (state.tags.size === 0) return true;
          const tags = school.tags ?? [];
          return Array.from(state.tags).some((tag) => tags.includes(tag));
        })
        .sort((a, b) => {
          const typeDiff = getPrimaryTypeOrder(a) - getPrimaryTypeOrder(b);
          if (typeDiff !== 0) return typeDiff;
          return a.name.localeCompare(b.name, 'ja');
        });
    }

    function appendDetail(list, term, value) {
      if (!value) return;
      const dt = document.createElement('dt');
      dt.textContent = term;
      const dd = document.createElement('dd');
      dd.textContent = value;
      list.append(dt, dd);
    }
    function createSchoolCard(school) {
      const article = document.createElement('article');
      article.className = 'school-card';
      article.setAttribute('role', 'listitem');

      const header = document.createElement('header');
      const logo = createSchoolLogo(school);
      header.appendChild(logo);

      const heading = document.createElement('div');
      heading.className = 'school-card-heading';
      const schoolTypes = getSchoolTypes(school).sort(
        (a, b) => (TYPE_ORDER[a] ?? 99) - (TYPE_ORDER[b] ?? 99)
      );

      if (schoolTypes.length > 0) {
        const typeGroup = document.createElement('div');
        typeGroup.className = 'school-type-group';
        schoolTypes.forEach((type) => {
          const typeLabel = document.createElement('span');
          typeLabel.className = 'school-type';
          typeLabel.textContent = TYPE_LABELS[type] ?? '習い事';
          typeGroup.appendChild(typeLabel);
        });
        heading.appendChild(typeGroup);
      }

      const name = document.createElement('h3');
      name.textContent = school.name;
      heading.appendChild(name);

      if (school.category) {
        const category = document.createElement('p');
        category.className = 'school-category';
        category.textContent = school.category;
        heading.appendChild(category);
      }

      if (school.district) {
        const area = document.createElement('p');
        area.className = 'school-area';
        area.textContent = school.district;
        heading.appendChild(area);
      }

      header.appendChild(heading);
      article.appendChild(header);

      const detail = document.createElement('dl');
      detail.className = 'school-detail';
      appendDetail(detail, '所在地', school.address);
      appendDetail(detail, '主催', school.managingBody);
      article.appendChild(detail);

      if (school.notes) {
        const notes = document.createElement('p');
        notes.className = 'school-notes';
        notes.textContent = school.notes;
        article.appendChild(notes);
      }

      if (school.tags && school.tags.length > 0) {
        const tags = document.createElement('ul');
        tags.className = 'school-tags';
        school.tags.forEach((tag) => {
          const item = document.createElement('li');
          item.textContent = tag;
          tags.appendChild(item);
        });
        article.appendChild(tags);
      }

      return article;
    }

    function render() {
      resultsRegion.setAttribute('aria-busy', 'true');
      const results = filterSchools();
      schoolList.replaceChildren();

      if (results.length === 0) {
        const empty = document.createElement('p');
        empty.className = 'empty-state';
        empty.textContent = '該当する習い事が見つかりませんでした。検索条件を見直してください。';
        schoolList.appendChild(empty);
      } else {
        results.forEach((school) => {
          schoolList.appendChild(createSchoolCard(school));
        });
      }

      const typeCounts = results.reduce((acc, school) => {
        getSchoolTypes(school).forEach((type) => {
          if (!state.types.has(type)) return;
          acc[type] = (acc[type] ?? 0) + 1;
        });
        return acc;
      }, {});

      const breakdown = typeKeys
        .map((type) => {
          const count = typeCounts[type] ?? 0;
          return count > 0 ? `${TYPE_LABELS[type]} ${count}件` : null;
        })
        .filter(Boolean)
        .join(' / ');

      resultSummary.innerHTML = `<strong>${results.length}</strong> 件の習い事を表示中${
        breakdown ? `<br><span class="result-breakdown">${breakdown}</span>` : ''
      }`;

      resultsRegion.setAttribute('aria-busy', 'false');
    }

    render();
  </script>
</body>
</html>
